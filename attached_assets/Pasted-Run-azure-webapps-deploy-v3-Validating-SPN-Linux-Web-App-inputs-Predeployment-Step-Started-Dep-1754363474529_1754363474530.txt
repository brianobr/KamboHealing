Run azure/webapps-deploy@v3
Validating SPN Linux Web App inputs...
Predeployment Step Started
Deployment Step Started
Starting deployment for web app...
Package deployment using OneDeploy initiated.
{
  id: '3d49b978-958e-48ee-9fac-e0714ef3b2c6',
  status: 3,
  status_text: '',
  author_email: 'N/A',
  author: 'N/A',
  deployer: 'OneDeploy',
  message: 'OneDeploy',
  progress: '',
  received_time: '2025-08-05T02:42:06.8341053Z',
  start_time: '2025-08-05T02:42:08.1306308Z',
  end_time: '2025-08-05T02:42:40.6294392Z',
  last_success_end_time: null,
  complete: true,
  active: false,
  is_temp: false,
  is_readonly: true,
  url: 'https://app-kambohealing-staging.scm.azurewebsites.net/api/deployments/3d49b978-958e-48ee-9fac-e0714ef3b2c6',
  log_url: 'https://app-kambohealing-staging.scm.azurewebsites.net/api/deployments/3d49b978-958e-48ee-9fac-e0714ef3b2c6/log',
  site_name: 'app-kambohealing',
  build_summary: { errors: [], warnings: [] }
}
Updating submodules.
Preparing deployment for commit id '3d49b978-9'.
PreDeployment: context.CleanOutputPath False
PreDeployment: context.OutputPath /home/site/wwwroot
Repository path is /tmp/zipdeploy/extracted
Running oryx build...
Command: oryx build /tmp/zipdeploy/extracted -o /home/site/wwwroot --platform nodejs --platform-version 20 -p virtualenv_name= --log-file /tmp/build-debug.log  -i /tmp/8ddd3c9abe0c2ad -p compress_node_modules=tar-gz | tee /tmp/oryx-build.log
Operation performed by Microsoft Oryx, https://github.com/Microsoft/Oryx
You can report issues at https://github.com/Microsoft/Oryx/issues

Oryx Version: 0.2.20250611.1+0649de32f1279969c9023dd41b389cce4bb94493, Commit: 0649de32f1279969c9023dd41b389cce4bb94493, ReleaseTagName: 20250611.1

Build Operation ID: e30b56e869f30ad9
Repository Commit : 3d49b978-958e-48ee-9fac-e0714ef3b2c6
OS Type           : bookworm
Image Type        : githubactions

Primary SDK Storage URL: https://oryx-cdn.microsoft.io
Backup SDK Storage URL: https://oryxsdks-cdn.azureedge.net
Detecting platforms...
External SDK provider is enabled.
Requesting metadata for platform nodejs from external SDK provider
Requesting metadata for platform nodejs from external SDK provider
Successfully requested blob for platform nodejs, blobName defaultVersion.bookworm.txt, available at /var/OryxSdks/nodejs/defaultVersion.bookworm.txt
Detected following platforms:
  nodejs: 20.19.3
Requesting metadata for platform nodejs from external SDK provider
Successfully requested blob for platform nodejs, blobName nodejs-bookworm-20.19.3.tar.gz, available at /var/OryxSdks/nodejs/nodejs-bookworm-20.19.3.tar.gz
Version '20.19.3' of platform 'nodejs' is not installed. Generating script to install it...
Detected the following frameworks: Typescript,Express,React

Using intermediate directory '/tmp/8ddd3c9abe0c2ad'.

Copying files to the intermediate directory...
Done in 1 sec(s).

Source directory     : /tmp/8ddd3c9abe0c2ad
Destination directory: /home/site/wwwroot


Downloading and extracting 'nodejs' version '20.19.3' to '/tmp/oryx/platforms/nodejs/20.19.3'...
Detected image debian flavor: bookworm.
Skipping download of nodejs version 20.19.3 as it is available in external sdk provider cache...
Extracting contents...
Successfully extracted nodejs version 20.19.3 from external sdk provider cache...
Done in 2 sec(s).

Removing existing manifest file
Creating directory for command manifest file if it does not exist
Creating a manifest file...
Node Build Command Manifest file created.

Using Node version:
v20.19.3

Using Npm version:
10.8.2

Running 'npm install'...


added 379 packages, and audited 380 packages in 21s
npm notice

npm notice New major version of npm available! 10.8.2 -> 11.5.2
53 packages are looking for funding
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
  run `npm fund` for details
npm notice To update run: npm install -g npm@11.5.2

npm notice
2 low severity vulnerabilities

To address all issues, run:
  npm audit fix

Run `npm audit` for details.

Running 'npm run build'...


> rest-express@1.0.0 build
sh: 1: vite: not found
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

npm notice\nnpm notice New major version of npm available! 10.8.2 -> 11.5.2\nnpm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2\nnpm notice To update run: npm install -g npm@11.5.2\nnpm notice\nsh: 1: vite: not found\n/bin/bash -c "oryx build /tmp/zipdeploy/extracted -o /home/site/wwwroot --platform nodejs --platform-version 20 -p virtualenv_name= --log-file /tmp/build-debug.log  -i /tmp/8ddd3c9abe0c2ad -p compress_node_modules=tar-gz | tee /tmp/oryx-build.log ; exit $PIPESTATUS "

Generating summary of Oryx build
Parsing the build logs
Found 0 issue(s)

Build Summary :
===============
Errors (0)
Warnings (0)

Deployment Failed. deployer = OneDeploy deploymentPath = OneDeploy
Error: Failed to deploy web package to App Service.
Error: Deployment Failed, Package deployment using ZIP Deploy failed. Refer logs for more details.
App Service Application URL: https://app-kambohealing-staging.azurewebsites.net